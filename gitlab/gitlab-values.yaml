---
# Default values for kubernetes-gitlab-demo.
# This is a YAML-formatted file.

# Required variables

# baseDomain is the top-most part of the domain. Subdomains will be generated
# for gitlab, mattermost, registry, and prometheus.
# Recommended to set up an A record on the DNS to *.your-domain.com to point to
# the baseIP
# e.g. *.your-domain.com.	A	300	baseIP
baseDomain: kstonedata.com.cn

# legoEmail is a valid email address used by Let's Encrypt. It does not have to
# be at the baseDomain.
legoEmail: ludun@k2data.com.cn

# Optional variables
# baseIP is an externally provisioned static IP address to use instead of the provisioned one.
#baseIP: 13.58.200.213
nameOverride: gitlab
# `ce` or `ee`
gitlab: ce
gitlabCEImage: gitlab/gitlab-ce:latest
gitlabEEImage: gitlab/gitlab-ee:latest
postgresPassword: NDl1ZjNtenMxcWR6NXZnbw==
initialSharedRunnersRegistrationToken: "tQtCbx5UZy_ByS7FyzUH"
mattermostAppSecret: NDl1ZjNtenMxcWR6NXZnbw==
mattermostAppUID: aadas
redisImage: redis:3.2.10
redisDedicatedStorage: true
#redisStorageSize: 5Gi
redisAccessMode: ReadWriteOnce
postgresImage: postgres:9.6.5
# If you disable postgresDedicatedStorage, you should consider bumping up gitlabRailsStorageSize
postgresDedicatedStorage: true
postgresAccessMode: ReadWriteOnce
postgresStorageSize: 100Gi
gitlabDataAccessMode: ReadWriteOnce
gitlabDataStorageSize: 100Gi
gitlabRegistryAccessMode: ReadWriteOnce
gitlabRegistryStorageSize: 100Gi
gitlabConfigAccessMode: ReadWriteOnce
gitlabConfigStorageSize: 10Gi
gitlabRunnerImage: gitlab/gitlab-runner:alpine
# Valid values for provider are `gke` for Google Container Engine. Leaving it blank (or any othervalue) will disable fast disk options.
provider: test

# Gitlab pages
# The following 3 lines are needed to enable gitlab pages.
pagesExternalScheme: http
pagesExternalDomain: pages.kstonedata.com.cn
pagesTlsSecret: gitlab-pages-tls # An optional reference to a tls secret to use in pages

## Storage Class Options
## If defined, volume.beta.kubernetes.io/storage-class: <storageClass>
## If not defined, but provider is gke, will use SSDs
## Otherwise default: volume.alpha.kubernetes.io/storage-class: default
gitlabConfigStorageClass: qingcloud-storageclass
gitlabDataStorageClass: qingcloud-storageclass
gitlabRegistryStorageClass: qingcloud-storageclass
postgresStorageClass: qingcloud-storageclass
redisStorageClass: qingcloud-storageclass

healthCheckToken: 'SXBAQichEJasbtDSygrD'
# Optional, for GitLab EE images only
#gitlabEELicense: base64-encoded-license

# Additional omnibus configuration,
# see https://docs.gitlab.com/omnibus/settings/configuration.html
# for possible configuration options
omnibusConfigRuby: |
  gitlab_rails['smtp_enable'] = true
  gitlab_rails['smtp_address'] = "smtp.exmail.qq.com"
  gitlab_rails['smtp_port'] = 587
  gitlab_rails['smtp_user_name'] = "ops@k2data.com.cn"
  gitlab_rails['smtp_password'] = "K2admin1217"
  gitlab_rails['smtp_domain'] = "k2data.com.cn"
  gitlab_rails['smtp_authentication'] = "login"
  gitlab_rails['smtp_tls'] = true
  # If your SMTP server does not like the default 'From: gitlab@localhost' you
  # can change the 'From' with this setting.
  gitlab_rails['gitlab_email_from'] = 'ops@k2data.com.cn'
  gitlab_rails['gitlab_email_reply_to'] = 'noreply@k2data.com.cn'

  gitlab_pages['inplace_chroot'] = true
  unicorn['worker_timeout'] = '1200'
gitlab-runner:
  gitlabUrl: http://dev-gitlab:8005/
  checkInterval: 1
  # runnerRegistrationToken must equal initialSharedRunnersRegistrationToken
  runnerRegistrationToken: "tQtCbx5UZy_ByS7FyzUH"
  # resources:
  #   limits:
  #     memory: 500Mi
  #     cpu: 600m
  #   requests:
  #     memory: 500Mi
  #     cpu: 600m
  runners:
    privileged: true
    ## Build Container specific configuration
    ##
    # builds:
    #   cpuLimit: 200m
    #   memoryLimit: 256Mi
    #   cpuRequests: 100m
    #   memoryRequests: 128Mi

    ## Service Container specific configuration
    ##
    # services:
    #   cpuLimit: 200m
    #   memoryLimit: 256Mi
    #   cpuRequests: 100m
    #   memoryRequests: 128Mi

    ## Helper Container specific configuration
    ##
    # helpers:
    #   cpuLimit: 200m
    #   memoryLimit: 256Mi
    #   cpuRequests: 100m
    #   memoryRequests: 128Mi

